<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nebula | Start Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                        dark: {
                            900: '#0a0a0a',
                            800: '#1a1a1a',
                            700: '#2a2a2a',
                            600: '#3a3a3a',
                            500: '#4a4a4a',
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'float-reverse': 'float-reverse 7s ease-in-out infinite',
                        'pulse-slow': 'pulse 8s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        'float-reverse': {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(20px)' },
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/css">
        .blur-bg {
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
        }
        .gradient-text {
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
        }
        .clock-digit {
            transition: all 0.3s ease;
        }
        .clock-digit:hover {
            transform: translateY(-5px);
            text-shadow: 0 0 10px rgba(14, 165, 233, 0.7);
        }
        html, body {
            height: 100%;
            overflow: auto;
        }
        .filter-btn.active {
            background-color: rgba(14, 165, 233, 0.2);
            color: #0ea5e9;
            border-color: #0ea5e9;
        }
        .link-icon {
            width: 24px;
            height: 24px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        .greeting-text {
            background-clip: text;
            -webkit-background-clip: text;
            background-image: linear-gradient(to right, #38bdf8, #0ea5e9, #0284c7);
            color: transparent;
        }
        .settings-panel {
            transition: all 0.3s ease;
            transform: translateX(100%);
        }
        .settings-panel.open {
            transform: translateX(0);
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #3a3a3a;
            transition: .4s;
            border-radius: 24px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #0ea5e9;
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
    </style>
</head>
<body class="bg-dark-900 text-gray-200 font-sans flex flex-col min-h-full">
    <!-- Animated background elements -->
    <div class="fixed inset-0 overflow-hidden -z-10">
        <div class="absolute top-1/4 left-1/4 w-64 h-64 rounded-full bg-primary-700 opacity-20 mix-blend-screen blur-3xl animate-float"></div>
        <div class="absolute top-1/3 right-1/3 w-80 h-80 rounded-full bg-primary-500 opacity-15 mix-blend-screen blur-3xl animate-float-reverse"></div>
        <div class="absolute bottom-1/4 right-1/4 w-72 h-72 rounded-full bg-primary-600 opacity-15 mix-blend-screen blur-3xl animate-pulse-slow"></div>
    </div>

    <header class="container mx-auto px-6 py-6">
        <div class="flex justify-between items-center">
            <h1 class="text-3xl font-bold">
                <span class="gradient-text bg-gradient-to-r from-primary-400 to-primary-600">Nebula</span>
            </h1>
            <div class="flex items-center space-x-4">
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-dark-700 transition-colors">
                  <!--<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden dark:block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                  
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 block dark:hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg>-->
                </button>
              
                <button id="settings-btn" class="p-2 rounded-full hover:bg-dark-700 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-6 pb-6 flex flex-col items-center">
        <!-- Digital Clock -->
        <div class="my-6 text-center">
            <div id="clock" class="text-5xl md:text-7xl font-bold mb-2 flex justify-center items-center space-x-4">
                <span id="hours" class="clock-digit gradient-text bg-gradient-to-r from-primary-400 to-primary-500"></span>
                <span class="clock-digit opacity-50">:</span>
                <span id="minutes" class="clock-digit gradient-text bg-gradient-to-r from-primary-400 to-primary-500"></span>
                <span class="clock-digit opacity-50">:</span>
                <span id="seconds" class="clock-digit gradient-text bg-gradient-to-r from-primary-400 to-primary-500"></span>
            </div>
            <div id="date" class="text-lg text-gray-400"></div>
            <div id="greeting" class="text-2xl md:text-3xl font-medium mt-2 greeting-text"></div>
        </div>

        <div class="w-full max-w-2xl my-6">
            <div class="relative">
                <input 
                    type="text" 
                    placeholder="Search the web or type a URL" 
                    class="w-full py-3 px-5 rounded-2xl bg-dark-800 border border-dark-700 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/30 outline-none transition-all duration-200 text-lg shadow-lg"
                    autofocus
                    id="search-input"
                >
                <button class="absolute right-3 top-1/2 transform -translate-y-1/2 p-2 rounded-full hover:bg-dark-700 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Quick Links Filter -->
        <div class="flex flex-wrap justify-center gap-2 my-4 w-full max-w-2xl">
            <button class="filter-btn active px-4 py-2 rounded-full border border-dark-600 hover:bg-dark-700 transition-colors" data-filter="all">All</button>
            <button class="filter-btn px-4 py-2 rounded-full border border-dark-600 hover:bg-dark-700 transition-colors" data-filter="social">Social</button>
            <button class="filter-btn px-4 py-2 rounded-full border border-dark-600 hover:bg-dark-700 transition-colors" data-filter="ott">OTT</button>
            <button class="filter-btn px-4 py-2 rounded-full border border-dark-600 hover:bg-dark-700 transition-colors" data-filter="education">Education</button>
            <button class="filter-btn px-4 py-2 rounded-full border border-dark-600 hover:bg-dark-700 transition-colors" data-filter="work">Work</button>
            <button class="filter-btn px-4 py-2 rounded-full border border-dark-600 hover:bg-dark-700 transition-colors" data-filter="entertainment">Entertainment</button>
        </div>

        <!-- Quick Links Grid -->
        <div id="quick-links" class="grid grid-cols-2 sm:grid-cols-4 gap-4 w-full max-w-4xl my-6">
            <!-- Quick Links will be loaded here -->
        </div>

        <!-- Weather Widget -->
        <div class="bg-dark-800/50 blur-bg rounded-xl p-4 my-6 w-full max-w-md">
            <div class="flex items-center justify-between">
                <div>
                    <div class="text-xl font-semibold">Current Weather</div>
                    <div class="text-sm text-gray-400" id="location">Loading location...</div>
                </div>
                <div class="text-right">
                    <div class="text-3xl font-bold" id="temperature">--°C</div>
                    <div class="text-sm text-gray-400" id="weather-condition">--</div>
                </div>
                <div class="text-3xl" id="weather-icon">
                    <i class="fas fa-question"></i>
                </div>
            </div>
            <div class="mt-3 grid grid-cols-4 gap-2 text-center" id="weather-forecast">
                <!-- Forecast will be loaded here -->
            </div>
        </div>
    </main>

    <footer class="container mx-auto px-6 py-4 text-center text-gray-500 text-xs">
        <div class="flex justify-center space-x-4 mb-2">
            <a href="#" class="hover:text-gray-300 transition-colors">Privacy</a>
            <a href="#" class="hover:text-gray-300 transition-colors">Terms</a>
            <a href="#" class="hover:text-gray-300 transition-colors">Help</a>
            <a href="#" class="hover:text-gray-300 transition-colors">Feedback</a>
        </div>
        <p>© <span id="current-year"></span> Nebula. All rights reserved.</p>
    </footer>

    <!-- Settings Panel -->
    <div id="settings-panel" class="settings-panel fixed top-0 right-0 h-full w-full sm:w-96 bg-dark-800 shadow-xl z-50 overflow-y-auto">
        <div class="p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Settings</h2>
                <button id="close-settings" class="p-2 rounded-full hover:bg-dark-700 transition-colors">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-6">
                <!-- Search History Section -->
                <div class="bg-dark-700 rounded-xl p-4">
                    <h3 class="text-lg font-semibold mb-3">Search History</h3>
                    <div id="search-history" class="space-y-2 max-h-60 overflow-y-auto">
                        <!-- Search history items will be loaded here -->
                    </div>
                    <button id="clear-history" class="mt-3 text-sm text-red-400 hover:text-red-300">Clear All History</button>
                </div>
                
                <!-- Features Section -->
                <div class="bg-dark-700 rounded-xl p-4">
                    <h3 class="text-lg font-semibold mb-3">Features</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <div>
                                <h4 class="font-medium">Ad Blocker</h4>
                                <p class="text-sm text-gray-400">Block ads on websites</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="ad-blocker-toggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <h4 class="font-medium">Dark Mode</h4>
                                <p class="text-sm text-gray-400">Toggle dark theme</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="dark-mode-toggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <h4 class="font-medium">Weather Widget</h4>
                                <p class="text-sm text-gray-400">Show weather information</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="weather-widget-toggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Links Management -->
                <div class="bg-dark-700 rounded-xl p-4">
                    <h3 class="text-lg font-semibold mb-3">Quick Links</h3>
                    <button id="export-links" class="w-full py-2 mb-2 rounded-lg bg-primary-600 hover:bg-primary-700 transition-colors">
                        Export Quick Links
                    </button>
                    <button id="import-links" class="w-full py-2 rounded-lg border border-dark-600 hover:bg-dark-600 transition-colors">
                        Import Quick Links
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Link Modal -->
    <div id="add-link-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-dark-800 rounded-xl p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-bold mb-4">Add New Quick Link</h3>
            <form id="add-link-form">
                <div class="mb-4">
                    <label class="block text-gray-400 mb-2">Name</label>
                    <input type="text" id="link-name" class="w-full px-4 py-2 rounded-lg bg-dark-700 border border-dark-600 focus:border-primary-500 outline-none" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-400 mb-2">URL</label>
                    <input type="url" id="link-url" class="w-full px-4 py-2 rounded-lg bg-dark-700 border border-dark-600 focus:border-primary-500 outline-none" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-400 mb-2">Category</label>
                    <select id="link-category" class="w-full px-4 py-2 rounded-lg bg-dark-700 border border-dark-600 focus:border-primary-500 outline-none">
                        <option value="social">Social</option>
                        <option value="ott">OTT</option>
                        <option value="education">Education</option>
                        <option value="work">Work</option>
                        <option value="entertainment">Entertainment</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="flex justify-end space-x-3">
                    <button type="button" id="cancel-add-link" class="px-4 py-2 rounded-lg border border-dark-600 hover:bg-dark-700 transition-colors">Cancel</button>
                    <button type="submit" class="px-4 py-2 rounded-lg bg-primary-600 hover:bg-primary-700 transition-colors">Add Link</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Link Modal -->
    <div id="edit-link-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-dark-800 rounded-xl p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-bold mb-4">Edit Quick Link</h3>
            <form id="edit-link-form">
                <input type="hidden" id="edit-link-index">
                <div class="mb-4">
                    <label class="block text-gray-400 mb-2">Name</label>
                    <input type="text" id="edit-link-name" class="w-full px-4 py-2 rounded-lg bg-dark-700 border border-dark-600 focus:border-primary-500 outline-none" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-400 mb-2">URL</label>
                    <input type="url" id="edit-link-url" class="w-full px-4 py-2 rounded-lg bg-dark-700 border border-dark-600 focus:border-primary-500 outline-none" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-400 mb-2">Category</label>
                    <select id="edit-link-category" class="w-full px-4 py-2 rounded-lg bg-dark-700 border border-dark-600 focus:border-primary-500 outline-none">
                        <option value="social">Social</option>
                        <option value="ott">OTT</option>
                        <option value="education">Education</option>
                        <option value="work">Work</option>
                        <option value="entertainment">Entertainment</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="flex justify-between">
                    <button type="button" id="delete-link" class="px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 transition-colors">Delete</button>
                    <div class="flex space-x-3">
                        <button type="button" id="cancel-edit-link" class="px-4 py-2 rounded-lg border border-dark-600 hover:bg-dark-700 transition-colors">Cancel</button>
                        <button type="submit" class="px-4 py-2 rounded-lg bg-primary-600 hover:bg-primary-700 transition-colors">Save</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Domain to icon mapping
        const domainIcons = {
            'google.com': 'fab fa-google',
            'youtube.com': 'fab fa-youtube',
            'facebook.com': 'fab fa-facebook',
            'twitter.com': 'fab fa-twitter',
            'instagram.com': 'fab fa-instagram',
            'linkedin.com': 'fab fa-linkedin',
            'reddit.com': 'fab fa-reddit',
            'github.com': 'fab fa-github',
            'gmail.com': 'fas fa-envelope',
            'outlook.com': 'fas fa-envelope',
            'netflix.com': 'fab fa-netflix',
            'spotify.com': 'fab fa-spotify',
            'amazon.com': 'fab fa-amazon',
            'twitch.tv': 'fab fa-twitch',
            'discord.com': 'fab fa-discord',
            'slack.com': 'fab fa-slack',
            'whatsapp.com': 'fab fa-whatsapp',
            'telegram.org': 'fab fa-telegram',
            'zoom.us': 'fas fa-video',
            'meet.google.com': 'fas fa-video',
            'coursera.org': 'fas fa-graduation-cap',
            'udemy.com': 'fas fa-book-open',
            'khanacademy.org': 'fas fa-chalkboard-teacher',
            'stackoverflow.com': 'fab fa-stack-overflow',
            'medium.com': 'fab fa-medium',
            'wikipedia.org': 'fas fa-wikipedia-w',
            'dropbox.com': 'fab fa-dropbox',
            'drive.google.com': 'fab fa-google-drive',
            'notion.so': 'fas fa-sticky-note',
            'trello.com': 'fab fa-trello'
        };

        // Default quick links data
        const defaultQuickLinks = [
            { name: "Gmail", url: "https://gmail.com", category: "work" },
            { name: "YouTube", url: "https://youtube.com", category: "entertainment" },
            { name: "GitHub", url: "https://github.com", category: "work" },
            { name: "Twitter", url: "https://twitter.com", category: "social" },
            { name: "Instagram", url: "https://instagram.com", category: "social" },
            { name: "Facebook", url: "https://facebook.com", category: "social" },
            { name: "Reddit", url: "https://reddit.com", category: "social" },
            { name: "LinkedIn", url: "https://linkedin.com", category: "work" },
            { name: "Netflix", url: "https://netflix.com", category: "ott" },
            { name: "Spotify", url: "https://spotify.com", category: "ott" },
            { name: "Coursera", url: "https://coursera.org", category: "education" },
            { name: "Udemy", url: "https://udemy.com", category: "education" }
        ];

        // Color mapping for categories
        const categoryColors = {
            social: 'blue',
            ott: 'red',
            education: 'purple',
            work: 'green',
            entertainment: 'yellow',
            other: 'gray'
        };

        // Get icon for URL
        function getIconForUrl(url) {
            try {
                const domain = new URL(url).hostname.replace('www.', '');
                return domainIcons[domain] || 'fas fa-link';
            } catch {
                return 'fas fa-link';
            }
        }

        // Get color for category
        function getColorForCategory(category) {
            return categoryColors[category] || 'primary';
        }

        // Load quick links from localStorage or use defaults
        function loadQuickLinks() {
            const savedLinks = localStorage.getItem('quickLinks');
            return savedLinks ? JSON.parse(savedLinks) : defaultQuickLinks;
        }

        // Save quick links to localStorage
        function saveQuickLinks(links) {
            localStorage.setItem('quickLinks', JSON.stringify(links));
        }

        // Load search history
        function loadSearchHistory() {
            const history = localStorage.getItem('searchHistory');
            return history ? JSON.parse(history) : [];
        }

        // Save search history
        function saveSearchHistory(history) {
            localStorage.setItem('searchHistory', JSON.stringify(history));
        }

        // Add to search history
        function addToSearchHistory(query) {
            const history = loadSearchHistory();
            // Remove if already exists
            const existingIndex = history.indexOf(query);
            if (existingIndex > -1) {
                history.splice(existingIndex, 1);
            }
            // Add to beginning
            history.unshift(query);
            // Keep only last 20 items
            const limitedHistory = history.slice(0, 20);
            saveSearchHistory(limitedHistory);
            renderSearchHistory();
        }

        // Clear search history
        function clearSearchHistory() {
            localStorage.removeItem('searchHistory');
            renderSearchHistory();
        }

        // Render search history
        function renderSearchHistory() {
            const history = loadSearchHistory();
            const container = document.getElementById('search-history');
            container.innerHTML = '';
            
            if (history.length === 0) {
                container.innerHTML = '<p class="text-gray-400 text-sm">No search history yet</p>';
                return;
            }
            
            history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'flex justify-between items-center p-2 bg-dark-600 rounded-lg';
                historyItem.innerHTML = `
                    <span class="truncate">${item}</span>
                    <button class="p-1 rounded-full hover:bg-dark-500 transition-colors delete-history-item">
                        <i class="fas fa-times text-xs"></i>
                    </button>
                `;
                
                // Add click event to search again
                historyItem.querySelector('span').addEventListener('click', () => {
                    document.getElementById('search-input').value = item;
                    document.getElementById('search-input').focus();
                });
                
                // Add delete button event
                historyItem.querySelector('.delete-history-item').addEventListener('click', (e) => {
                    e.stopPropagation();
                    const updatedHistory = history.filter(h => h !== item);
                    saveSearchHistory(updatedHistory);
                    renderSearchHistory();
                });
                
                container.appendChild(historyItem);
            });
        }

        // Render quick links based on filter
        function renderQuickLinks(filter = 'all') {
            const quickLinks = loadQuickLinks();
            const container = document.getElementById('quick-links');
            container.innerHTML = '';

            // Add "Add New" button
            const addBtn = document.createElement('div');
            addBtn.className = 'group cursor-pointer';
            addBtn.innerHTML = `
                <div class="bg-dark-800/50 hover:bg-dark-700/50 blur-bg rounded-xl p-4 transition-all duration-300 h-full flex flex-col items-center text-center group-hover:-translate-y-1" id="add-new-link">
                    <div class="w-10 h-10 rounded-lg bg-primary-500/10 flex items-center justify-center mb-3 group-hover:bg-primary-500/20 transition-colors">
                        <i class="fas fa-plus text-primary-400 text-lg"></i>
                    </div>
                    <h3 class="font-medium text-sm">Add New</h3>
                    <p class="text-xs text-gray-400 mt-1">Quick Link</p>
                </div>
            `;
            container.appendChild(addBtn);

            // Add event listener to "Add New" button
            addBtn.addEventListener('click', () => {
                document.getElementById('add-link-modal').classList.remove('hidden');
            });

            // Filter and render links
            const filteredLinks = filter === 'all' 
                ? quickLinks 
                : quickLinks.filter(link => link.category === filter);

            filteredLinks.forEach((link, index) => {
                const linkElement = document.createElement('div');
                linkElement.className = 'group quick-link relative';
                linkElement.dataset.category = link.category;
                
                const icon = getIconForUrl(link.url);
                const color = getColorForCategory(link.category);
                
                linkElement.innerHTML = `
                    <a href="${link.url}" target="_blank" class="block h-full">
                        <div class="bg-dark-800/50 hover:bg-dark-700/50 blur-bg rounded-xl p-4 transition-all duration-300 h-full flex flex-col items-center text-center group-hover:-translate-y-1">
                            <div class="w-10 h-10 rounded-lg bg-${color}-500/10 flex items-center justify-center mb-3 group-hover:bg-${color}-500/20 transition-colors">
                                <i class="${icon} text-${color}-400 text-lg"></i>
                            </div>
                            <h3 class="font-medium text-sm">${link.name}</h3>
                            <p class="text-xs text-gray-400 mt-1">${link.category.charAt(0).toUpperCase() + link.category.slice(1)}</p>
                        </div>
                    </a>
                    <button class="absolute top-1 right-1 p-1 rounded-full bg-dark-700/50 hover:bg-dark-600 transition-colors opacity-0 group-hover:opacity-100 edit-link-btn">
                        <i class="fas fa-ellipsis-v text-xs"></i>
                    </button>
                `;
                
                // Add edit functionality
                const editBtn = linkElement.querySelector('.edit-link-btn');
                editBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    showEditLinkModal(index, link);
                });
                
                container.appendChild(linkElement);
            });
        }

        // Show edit link modal
        function showEditLinkModal(index, link) {
            document.getElementById('edit-link-index').value = index;
            document.getElementById('edit-link-name').value = link.name;
            document.getElementById('edit-link-url').value = link.url;
            document.getElementById('edit-link-category').value = link.category;
            document.getElementById('edit-link-modal').classList.remove('hidden');
        }

        // Update greeting based on time of day
        function updateGreeting() {
            const hour = new Date().getHours();
            let greeting;
            
            if (hour < 12) {
                greeting = "Good Morning";
            } else if (hour < 18) {
                greeting = "Good Afternoon";
            } else {
                greeting = "Good Evening";
            }
            
            document.getElementById('greeting').textContent = greeting;
        }

        // Get weather data (mock for now)
        function getWeatherData() {
            // In a real implementation, you would fetch this from a weather API
            const weatherData = {
                location: "New York, NY",
                temperature: 24,
                condition: "Sunny",
                icon: "sun",
                forecast: [
                    { day: "Mon", temp: 26, icon: "sun" },
                    { day: "Tue", temp: 24, icon: "cloud-sun" },
                    { day: "Wed", temp: 20, icon: "cloud-rain" },
                    { day: "Thu", temp: 25, icon: "sun" }
                ]
            };
            
            document.getElementById('location').textContent = weatherData.location;
            document.getElementById('temperature').textContent = `${weatherData.temperature}°C`;
            document.getElementById('weather-condition').textContent = weatherData.condition;
            document.getElementById('weather-icon').innerHTML = `<i class="fas fa-${weatherData.icon}"></i>`;
            
            const forecastContainer = document.getElementById('weather-forecast');
            forecastContainer.innerHTML = '';
            
            weatherData.forecast.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.innerHTML = `
                    <div class="text-xs text-gray-400">${day.day}</div>
                    <i class="fas fa-${day.icon} my-1 text-lg"></i>
                    <div class="font-medium text-sm">${day.temp}°</div>
                `;
                forecastContainer.appendChild(dayElement);
            });
        }

        // Update clock every second
        function updateClock() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            
            document.getElementById('hours').textContent = hours;
            document.getElementById('minutes').textContent = minutes;
            document.getElementById('seconds').textContent = seconds;
            
            // Format date as "Weekday, Month Day, Year"
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('date').textContent = now.toLocaleDateString('en-US', options);
        }
        
        // Initialize the page
        function init() {
            // Set current year in footer
            document.getElementById('current-year').textContent = new Date().getFullYear();
            
            // Load saved theme preference
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.classList.toggle('dark', savedTheme === 'dark');
            
            // Set up theme toggle
            document.getElementById('theme-toggle').addEventListener('click', function() {
                const isDark = document.documentElement.classList.toggle('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                // Update toggle switch in settings
                document.getElementById('dark-mode-toggle').checked = isDark;
            });
            
            // Set up settings button
            document.getElementById('settings-btn').addEventListener('click', function() {
                document.getElementById('settings-panel').classList.add('open');
                renderSearchHistory();
                // Load current settings
                document.getElementById('dark-mode-toggle').checked = document.documentElement.classList.contains('dark');
            });
            
            // Set up close settings button
            document.getElementById('close-settings').addEventListener('click', function() {
                document.getElementById('settings-panel').classList.remove('open');
            });
            
            // Set up clear history button
            document.getElementById('clear-history').addEventListener('click', clearSearchHistory);
            
            // Set up ad blocker toggle
            document.getElementById('ad-blocker-toggle').addEventListener('change', function() {
                // In a real implementation, this would enable/disable ad blocking
                localStorage.setItem('adBlockerEnabled', this.checked);
            });
            
            // Set up dark mode toggle in settings
            document.getElementById('dark-mode-toggle').addEventListener('change', function() {
                document.documentElement.classList.toggle('dark', this.checked);
                localStorage.setItem('theme', this.checked ? 'dark' : 'light');
            });
            
            // Set up weather widget toggle
            document.getElementById('weather-widget-toggle').addEventListener('change', function() {
                const widget = document.querySelector('.bg-dark-800\\/50.blur-bg.rounded-xl.p-4.my-6');
                widget.style.display = this.checked ? 'block' : 'none';
                localStorage.setItem('weatherWidgetEnabled', this.checked);
            });
            
            // Initialize weather widget state
            const weatherWidgetEnabled = localStorage.getItem('weatherWidgetEnabled') !== 'false';
            document.getElementById('weather-widget-toggle').checked = weatherWidgetEnabled;
            if (!weatherWidgetEnabled) {
                document.querySelector('.bg-dark-800\\/50.blur-bg.rounded-xl.p-4.my-6').style.display = 'none';
            }
            
            // Set up export links button
            document.getElementById('export-links').addEventListener('click', function() {
                const links = loadQuickLinks();
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(links, null, 2));
                const downloadAnchorNode = document.createElement('a');
                downloadAnchorNode.setAttribute("href", dataStr);
                downloadAnchorNode.setAttribute("download", "nebula-quicklinks.json");
                document.body.appendChild(downloadAnchorNode);
                downloadAnchorNode.click();
                downloadAnchorNode.remove();
            });
            
            // Set up import links button
            document.getElementById('import-links').addEventListener('click', function() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                input.onchange = e => {
                    const file = e.target.files[0];
                    const reader = new FileReader();
                    reader.readAsText(file, 'UTF-8');
                    reader.onload = readerEvent => {
                        try {
                            const links = JSON.parse(readerEvent.target.result);
                            saveQuickLinks(links);
                            renderQuickLinks(document.querySelector('.filter-btn.active').dataset.filter);
                            alert('Quick links imported successfully!');
                        } catch (err) {
                            alert('Error importing quick links: Invalid file format');
                        }
                    };
                };
                input.click();
            });
            
            // Render quick links
            renderQuickLinks();
            
            // Set up filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    renderQuickLinks(this.dataset.filter);
                });
            });
            
            // Set up search functionality
            document.getElementById('search-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const query = this.value.trim();
                    if (query) {
                        addToSearchHistory(query);
                        if (query.includes('.') && !query.includes(' ')) {
                            window.location.href = query.startsWith('http') ? query : `https://${query}`;
                        } else {
                            window.location.href = `https://google.com/search?q=${encodeURIComponent(query)}`;
                        }
                    }
                }
            });
            
            // Set up add link modal
            document.getElementById('add-link-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('link-name').value;
                const url = document.getElementById('link-url').value;
                const category = document.getElementById('link-category').value;
                
                const links = loadQuickLinks();
                links.push({
                    name,
                    url: url.startsWith('http') ? url : `https://${url}`,
                    category
                });
                
                saveQuickLinks(links);
                renderQuickLinks(document.querySelector('.filter-btn.active').dataset.filter);
                
                // Reset and close modal
                this.reset();
                document.getElementById('add-link-modal').classList.add('hidden');
            });
            
            document.getElementById('cancel-add-link').addEventListener('click', function() {
                document.getElementById('add-link-form').reset();
                document.getElementById('add-link-modal').classList.add('hidden');
            });
            
            // Set up edit link modal
            document.getElementById('edit-link-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const index = document.getElementById('edit-link-index').value;
                const name = document.getElementById('edit-link-name').value;
                const url = document.getElementById('edit-link-url').value;
                const category = document.getElementById('edit-link-category').value;
                
                const links = loadQuickLinks();
                links[index] = {
                    name,
                    url: url.startsWith('http') ? url : `https://${url}`,
                    category
                };
                
                saveQuickLinks(links);
                renderQuickLinks(document.querySelector('.filter-btn.active').dataset.filter);
                document.getElementById('edit-link-modal').classList.add('hidden');
            });
            
            document.getElementById('cancel-edit-link').addEventListener('click', function() {
                document.getElementById('edit-link-modal').classList.add('hidden');
            });
            
            document.getElementById('delete-link').addEventListener('click', function() {
                const index = document.getElementById('edit-link-index').value;
                const links = loadQuickLinks();
                links.splice(index, 1);
                saveQuickLinks(links);
                renderQuickLinks(document.querySelector('.filter-btn.active').dataset.filter);
                document.getElementById('edit-link-modal').classList.add('hidden');
            });
            
            // Update clock immediately and then every second
            updateClock();
            setInterval(updateClock, 1000);
            
            // Update greeting
            updateGreeting();
            
            // Load weather data
            getWeatherData();
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>